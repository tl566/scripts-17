/**
 * @title xjsp
 * @create_at 2022-11-27 10:46:40
 * @rule xjsp
 * @rule xj ?
 * @description 🐒这个人很懒什么都没有留下。
 * @author onz3v
 * @version v1.0.3
 * @public true
 * @encrypt true
 */

let $ = sender;
const getVarType = (o) => (Object.prototype.toString.call(o).match(/\[object (.*?)\]/) || [])[1].toLowerCase();
const random = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
const hotList = ['熟女', '阿姨', '3p', '电话', '绿帽', '换妻', '内射', '巨乳', 'spa', '肛交', 'jk', '单男', '自慰', '学生', '乱伦', '黑人', '调教', '眼镜', '足交', '偷情', '母狗', '对白', '口爆', '少妇', '萝莉', '健身', '按摩', '强奸', '双飞', '高潮', '喷水', '勾引', '丝袜', '黑丝', '颜射', 'KTV', '老师', '极品', '扩张']
let kw = $.param(1) || hotList[random(0, hotList.length)];
let wd = encodeURIComponent(kw)
/*hidden*/
const url = `https://oycucp4hlq1wj15ow40r.xiangxiangapps.com/`
var _0xod6 = 'jsjiami.com.v6', _0xod6_ = ['‮_0xod6'], _0x356b = [_0xod6, 'wrHDp0DDjUrClGfDsEPDi8KXCBQoL8OYanJYF15wXhzDjmnDgcKfwr7DnxnCqkQ0YQZnAAo1Rl/DhFYpwpZnIMKuw53CiFsSPnBVw47DocKcBUZgEcKDUS4KSQZTMXXCrsKfSx/DjnfCnsKmIBQULMOjTHtxYMO1U8OiOFTDlcO1wqfDpsKtPMKyXmPDg8ORwrcTIHUUThggw54=', 'jEsjiaMLLmi.cqBom.FAvCq6WpJgfTN==']; if (function (_0x465fdf, _0x353074, _0x107990) { function _0x175f5a(_0x56c592, _0x1fb2f2, _0x530b8b, _0x30c2e7, _0x32794b, _0x2e3e05) { _0x1fb2f2 = _0x1fb2f2 >> 0x8, _0x32794b = 'po'; var _0x58b004 = 'shift', _0x49b28e = 'push', _0x2e3e05 = '‮'; if (_0x1fb2f2 < _0x56c592) { while (--_0x56c592) { _0x30c2e7 = _0x465fdf[_0x58b004](); if (_0x1fb2f2 === _0x56c592 && _0x2e3e05 === '‮' && _0x2e3e05['length'] === 0x1) { _0x1fb2f2 = _0x30c2e7, _0x530b8b = _0x465fdf[_0x32794b + 'p'](); } else if (_0x1fb2f2 && _0x530b8b['replace'](/[EMLLqBFACqWpJgfTN=]/g, '') === _0x1fb2f2) { _0x465fdf[_0x49b28e](_0x30c2e7); } } _0x465fdf[_0x49b28e](_0x465fdf[_0x58b004]()); } return 0x116180; }; return _0x175f5a(++_0x353074, _0x107990) >> _0x353074 ^ _0x107990; }(_0x356b, 0x75, 0x7500), _0x356b) { _0xod6_ = _0x356b['length'] ^ 0x75; }; function _0x103c(_0x3f8e4c, _0x1a4ea4) { _0x3f8e4c = ~~'0x'['concat'](_0x3f8e4c['slice'](0x1)); var _0x125442 = _0x356b[_0x3f8e4c]; if (_0x103c['hwobEu'] === undefined) { (function () { var _0x526ba5 = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this; var _0xfc67c9 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='; _0x526ba5['atob'] || (_0x526ba5['atob'] = function (_0xb54e06) { var _0x156b58 = String(_0xb54e06)['replace'](/=+$/, ''); for (var _0x12b3f1 = 0x0, _0x105ea0, _0x2e661c, _0x25b6d2 = 0x0, _0xd2f554 = ''; _0x2e661c = _0x156b58['charAt'](_0x25b6d2++); ~_0x2e661c && (_0x105ea0 = _0x12b3f1 % 0x4 ? _0x105ea0 * 0x40 + _0x2e661c : _0x2e661c, _0x12b3f1++ % 0x4) ? _0xd2f554 += String['fromCharCode'](0xff & _0x105ea0 >> (-0x2 * _0x12b3f1 & 0x6)) : 0x0) { _0x2e661c = _0xfc67c9['indexOf'](_0x2e661c); } return _0xd2f554; }); }()); function _0x5a946e(_0x13acd1, _0x1a4ea4) { var _0x3bb0ba = [], _0x4fef95 = 0x0, _0x7c5843, _0x566181 = '', _0x1e8baa = ''; _0x13acd1 = atob(_0x13acd1); for (var _0x4e8a9d = 0x0, _0x2b7c4b = _0x13acd1['length']; _0x4e8a9d < _0x2b7c4b; _0x4e8a9d++) { _0x1e8baa += '%' + ('00' + _0x13acd1['charCodeAt'](_0x4e8a9d)['toString'](0x10))['slice'](-0x2); } _0x13acd1 = decodeURIComponent(_0x1e8baa); for (var _0x4b7968 = 0x0; _0x4b7968 < 0x100; _0x4b7968++) { _0x3bb0ba[_0x4b7968] = _0x4b7968; } for (_0x4b7968 = 0x0; _0x4b7968 < 0x100; _0x4b7968++) { _0x4fef95 = (_0x4fef95 + _0x3bb0ba[_0x4b7968] + _0x1a4ea4['charCodeAt'](_0x4b7968 % _0x1a4ea4['length'])) % 0x100; _0x7c5843 = _0x3bb0ba[_0x4b7968]; _0x3bb0ba[_0x4b7968] = _0x3bb0ba[_0x4fef95]; _0x3bb0ba[_0x4fef95] = _0x7c5843; } _0x4b7968 = 0x0; _0x4fef95 = 0x0; for (var _0x297564 = 0x0; _0x297564 < _0x13acd1['length']; _0x297564++) { _0x4b7968 = (_0x4b7968 + 0x1) % 0x100; _0x4fef95 = (_0x4fef95 + _0x3bb0ba[_0x4b7968]) % 0x100; _0x7c5843 = _0x3bb0ba[_0x4b7968]; _0x3bb0ba[_0x4b7968] = _0x3bb0ba[_0x4fef95]; _0x3bb0ba[_0x4fef95] = _0x7c5843; _0x566181 += String['fromCharCode'](_0x13acd1['charCodeAt'](_0x297564) ^ _0x3bb0ba[(_0x3bb0ba[_0x4b7968] + _0x3bb0ba[_0x4fef95]) % 0x100]); } return _0x566181; } _0x103c['yOJLaN'] = _0x5a946e; _0x103c['VhkDHF'] = {}; _0x103c['hwobEu'] = !![]; } var _0x1e2352 = _0x103c['VhkDHF'][_0x3f8e4c]; if (_0x1e2352 === undefined) { if (_0x103c['OrSBaE'] === undefined) { _0x103c['OrSBaE'] = !![]; } _0x125442 = _0x103c['yOJLaN'](_0x125442, _0x1a4ea4); _0x103c['VhkDHF'][_0x3f8e4c] = _0x125442; } else { _0x125442 = _0x1e2352; } return _0x125442; }; const encry = _0x103c('‫0', '7zlb');; _0xod6 = 'jsjiami.com.v6';
const timestrap = new Date().getTime();
let page = 1;
let search_params = `search?_t=${timestrap}&${encry}&wd=${wd}`
const info_params = `?_t=${timestrap}&${encry}`
const getList = () => {
    let { body } = request({ url: url + search_params + `&page=${page}` })
    console.log(body)
    let _body = JSON.parse(body);
    let data = _body.data.vodrows;
    if(!data.length) return $.reply('你有点贪心了')
    let list = [];
    data.map(item => {
        list.push({
            title: item.title,
            link: item.play_url
        })
    })
    // console.log(list)
    getInfo(list)
}
const getInfo = (data) => {
    let msg = ''
    data.map((item, index) => {
        msg += (index + '、' + item.title + '\n')
    })
    $.reply(msg)
    $.reply(`当前分类：${kw}，选择对应序号进行观看，下一页请输入【继续】，其他退出`)
    $.listen(30000, function (s) {
        let index = null;
        if (parseInt(s.getContent())) {
            index = s.getContent() * 1
        } else {
            if (s.getContent().includes('继续')) {
                page += 1
                getList()
                return;
            }
        }
        if (getVarType(index) !== 'number') return $.reply('已退出')
        console.log("选择的是" + index);
        let { body } = request({ url: url + data[index].link + info_params });
        let _body = JSON.parse(body);
        console.log(_body.data.httpurl);
        let play_url = _body.data.httpurl;
        $.reply('播放链接：' + play_url + "\n请到 << https://m3u8-player.com >> 进行观看")
    })


}

getList()

/*neddih*/